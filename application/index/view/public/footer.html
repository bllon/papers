
</div>
</div>
<div class="clear"></div>
<div id="footer" style="width:100%;text-align:center;padding:5px 0px;color:rgba(57,182,212,1);">&copy;&nbsp;paper.com&nbsp;论文库</div>
</body>
	<div class="modal fade loginmodel" tabindex="-1" role="dialog">
	  <div class="modal-dialog" role="document">
	    <div class="modal-content">
	      <div class="modal-header">
	        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
	        <h4 class="modal-title" id="exampleModalLabel">用户登录</h4>
	      </div>
	      <div class="modal-body">
	        <form>
	          <div class="form-group">
	          	<label for="message-text" class="control-label">用户名</label>
	            <div class="input-group">
				  <span class="input-group-addon" id="sizing-addon2"><span class="glyphicon glyphicon-user"></span></span>
				  <input type="text" class="form-control" id="name" placeholder="用户名" aria-describedby="sizing-addon2">
				</div>
	          </div>
	          <div class="form-group">
	            <label for="message-text" class="control-label">密码</label>
	            <div class="input-group">
				  <span class="input-group-addon" id="sizing-addon2"><span class="glyphicon glyphicon-lock"></span></span>
				  <input type="password" class="form-control" id="password" placeholder="密码" aria-describedby="sizing-addon2">
				</div>
	          </div>
	        </form>
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
	        <button type="button" class="btn btn-info" id="login">登录</button>
	      </div>
	    </div><!-- /.modal-content -->
	  </div><!-- /.modal-dialog -->
	</div><!-- /.modal -->
	
	
	<div class="modal fade registermodel" tabindex="-1" role="dialog">
	  <div class="modal-dialog" role="document">
	    <div class="modal-content">
	      <div class="modal-header">
	        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
	        <h4 class="modal-title" id="exampleModalLabel">用户注册</h4>
	      </div>
	      <div class="modal-body">
	        <form>
	          <div class="form-group">
	          	<label for="message-text" class="control-label">用户名</label>
	            <div class="input-group">
				  <span class="input-group-addon"><span class="glyphicon glyphicon-user"></span></span>
				  <input type="text" class="form-control" id="reg_name" placeholder="用户名" aria-describedby="sizing-addon2">
				</div>
	          </div>
	          <div class="form-group">
	          	<label for="message-text" class="control-label">学校名</label>
	            <div class="input-group">
				  <span class="input-group-addon"><span class="glyphicon glyphicon-user"></span></span>
				  <input type="text" class="form-control" id="reg_schoolname" placeholder="学校名" aria-describedby="sizing-addon2">
				</div>
	          </div>
	          <div class="form-group">
	          	<label for="message-text" class="control-label">邮箱</label>
	            <div class="input-group">
				  <span class="input-group-addon"><span class="glyphicon glyphicon-envelope"></span></span>
				  <input type="email" class="form-control" id="reg_email" placeholder="邮箱" aria-describedby="sizing-addon2">
				</div>
	          </div>
	          <div class="form-group">
	            <label for="message-text" class="control-label">密码</label>
	            <div class="input-group">
				  <span class="input-group-addon"><span class="glyphicon glyphicon-lock"></span></span>
				  <input type="password" class="form-control" id="reg_password" placeholder="密码" aria-describedby="sizing-addon2">
				</div>
	          </div>
	          <div class="form-group">
	            <label for="message-text" class="control-label">确认密码</label>
	            <div class="input-group">
				  <span class="input-group-addon"><span class="glyphicon glyphicon-lock"></span></span>
				  <input type="password" class="form-control" id="confirm_password" placeholder="确认密码" aria-describedby="sizing-addon2">
				</div>
	          </div>
	        </form>
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
	        <button type="button" class="btn btn-info" id="register">注册</button>
	      </div>
	    </div><!-- /.modal-content -->
	  </div><!-- /.modal-dialog -->
	</div><!-- /.modal -->
</html>

<script>
//	alert(document.body.scrollHeight);
	$('#footer').css({
		'position':'absolute',
		'top':$(document).height()+30+'px'
	});
	
	
	$('#logout').on('click',function(e){
		e.preventDefault();
		$.ajax({
			type:"get",
			url:"{:url('consumer/logout')}",
			async:true,
			success:function(data){	
//				alert(data.message);
				window.location.href="{:url('index/index/index')}";
			},
			error:function(data){
				alert(data.message);
				history.back();
			},
		});
		return false;
	})

	$('#login').on('click',function(e){
		e.preventDefault();
		var name  = $('#name').val();
		var pass = $('#password').val();
		$.ajax({
			type:"post",
			url:"{:url('index/consumer/login')}",
			async:true,
			data:{
				'name':name,
				'password':pass
			},
			success:function(data){
				if(data.status == 1){
					window.location.href="{:url('index/index/index')}";
				}else{
					alert(data.message);
				}
			},
			error:function(data){
				alert(data.message);
//				history.back();
			},
		});
		return false;
	})
	
	
	$('#register').on('click',function(e){
		e.preventDefault();
		var name  = $('#reg_name').val();
		var schoolname  = $('#reg_schoolname').val();
		var email  = $('#reg_email').val();
		var pass = $('#reg_password').val();
		var confirm_pass = $('#confirm_password').val();
		
		$.ajax({
			type:"post",
			url:"{:url('index/consumer/register')}",
			async:true,
			data:{
				'name':name,
				'school_name':schoolname,
				'email':email,
				'password':pass,
				'password_confirm':confirm_pass,
			},
			dataType:"json",
			success:function(data){
				alert(data.message);
				if(data.status == 1){
					window.location.href="{:url('index/index/index')}";
				}
			},
			error:function(data){
				alert(data.message);
//				history.back();
			},
		});
		return false;
	})
	
	$(".loginmodel").bind("keydown",function(e){
        // 兼容FF和IE和Opera    
	    var theEvent = e || window.event;    
	    var code = theEvent.keyCode || theEvent.which || theEvent.charCode;    
	    if (code == 13) {    
	        //回车执行查询
	            $("#login").click();
	       }
	});
	
	$(".registermodel").bind("keydown",function(e){
        // 兼容FF和IE和Opera    
	    var theEvent = e || window.event;    
	    var code = theEvent.keyCode || theEvent.which || theEvent.charCode;    
	    if (code == 13) {    
	        //回车执行查询
	            $("#register").click();
	       }
	});
</script>