{extend name="public:base"}
		{block name="body"}
		<div class="container">
			<div class="row">
				<div class="col-md-8 col-xs-12">
					<div class="page-header">
					  <h2>用户设置</h2>
					</div>
					<form action="{:url('index/saveSetting')}" method="post" enctype="multipart/form-data">
					  <input type="hidden" name="pass" id="pass" value="{$userInfo.password}" />
					  <div class="form-group">
					  	<label for="">用户名</label>
					  	<input type="text" class="form-control" name="name" id="" value="{$userInfo.name}"/>
					  </div>
					  <div class="form-group">
					  	<label for="">学校</label>
					  	<input type="text" class="form-control" name="school_name" id="" value="{$userInfo.school_name}" disabled="disabled"/>
					  </div>
					  <div class="form-group">
					  	<label for="">邮箱</label>
					  	<input type="text" class="form-control" name="email" id="" value="{$userInfo.email}"/>
					  </div>
					  <div class="form-group">
					  	<label for="">密码</label>
					  	<input type="password" class="form-control" name="password" id="" value="{$userInfo.password}"/>
					  </div>
					  <div class="form-group" style="width:30%;">
					  	<label for="">头像</label>
						<input type="file" name="user_img" id="input-file-disable-remove" class="dropify" data-default-file="{$userInfo.user_img}"  data-show-remove="false" data-max-file-size="2M" />		
					  </div>
					  <div class="form-group">
					  	<button type="submit" class="btn btn-sm btn-info">保存</button>
					  </div>
					</form>
				</div>
				
				
				<script src="/static/dropify/dist/js/dropify.min.js"></script>
    <script src="/static/jquery-minicolors/jquery.minicolors.js"></script>

	<link rel="stylesheet" href="/static/jquery-minicolors/jquery.minicolors.css">
	<link rel="stylesheet" href="/static/dropify/dist/css/demo.css">
    <link rel="stylesheet" href="/static/dropify/dist/css/dropify.min.css">
		<script>
            $(document).ready(function(){
                // Basic
                $('.dropify').dropify();

                // Translated
                $('.dropify-fr').dropify({
                    messages: {
                        default: 'Glissez-déposez un fichier ici ou cliquez',
                        replace: 'Glissez-déposez un fichier ou cliquez pour remplacer',
                        remove:  'Supprimer',
                        error:   'Désolé, le fichier trop volumineux'
                    }
                });

                // Used events
                var drEvent = $('#input-file-events').dropify();

                drEvent.on('dropify.beforeClear', function(event, element){
                    return confirm("Do you really want to delete \"" + element.file.name + "\" ?");
                });

                drEvent.on('dropify.afterClear', function(event, element){
                    alert('File deleted');
                });

                drEvent.on('dropify.errors', function(event, element){
                    console.log('Has Errors');
                });

                var drDestroy = $('#input-file-to-destroy').dropify();
                drDestroy = drDestroy.data('dropify')
                $('#toggleDropify').on('click', function(e){
                    e.preventDefault();
                    if (drDestroy.isDropified()) {
                        drDestroy.destroy();
                    } else {
                        drDestroy.init();
                    }
                })
            });
        </script>
        
        <script>
		$(document).ready( function() {

			

            $('.demo').each( function() {

				$(this).minicolors({

					control: $(this).attr('data-control') || 'hue',

					defaultValue: $(this).attr('data-defaultValue') || '',

					inline: $(this).attr('data-inline') === 'true',

					letterCase: $(this).attr('data-letterCase') || 'lowercase',

					opacity: $(this).attr('data-opacity'),

					position: $(this).attr('data-position') || 'bottom left',

					change: function(hex, opacity) {

						var log;

						try {

							log = hex ? hex : 'transparent';

							if( opacity ) log += ', ' + opacity;

							console.log(log);

						} catch(e) {}

					},

					theme: 'default'

				});

                

            });

			

		});

	</script>
{/block}

